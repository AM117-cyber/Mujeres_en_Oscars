<!DOCTYPE html>
<html lang="en">
  <head>
      <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  </head>
  <body>
    <head>
        <style>
            .container {
                position: relative;
                text-align: center;
                color: white;
            }
    
            .centered {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 24px;
            }
    
            img {
                width: 100%;
                height: auto;
            }
        </style>
    </head>
    <body>
    
    <div class="container">
      <img src="mujer-oscars.jpg" alt="Your Image">
      <div class="centered">Presencia de la Mujer en los Roles de Dirección, Música, Guion y Producción en los Premios Óscar</div>
    </div>
    
    </body>
    </html>
    
  <section style="padding-top:20px;">
    <div style="margin: auto; max-width: 1000px;">
        <p style="margin: 48px 0; margin-bottom: 0px; font-weight: normal; color: gray;">
          El 9 de julio de 2023 se estrenó ‘Barbie’, filme dirigido por Greta Gerwig que se convertiría en la película con mayores ingresos del 2023, recaudando 1.4 billones en taquilla. En la 81. ͣ entrega de los Globos de Oro estuvo nominada para 9 premios, lo que la convierte en la segunda película más nominada en la historia de los Globos de Oro, siendo la primera ‘Nashville’. A la espera de la 96. ͣ edición de los Premios Óscar, que debe realizarse el 10 de marzo de este año, se anticipa una nominación para Gerwig en la categoría de "Mejor Dirección" tras el increíble recibimiento que ha tenido su filme. Esta sería la segunda vez que es nominada para un premio en esta categoría, puesto que en el 2017 recibió una nominación por el filme ‘Lady Bird’, siendo la segunda mujer después de Jane Campion en ser seleccionada como candidata en más de una ocasión para un Óscar en esta categoría.
        </p>
        <div class="image-container">
      <style>
        .image-container {
          display: flex;
          flex-wrap: wrap;
          flex-direction: column;
        }
        .image-block {
          margin: 10px;
        }
      </style>

  </section>
  
      <style>
          .container {
              display: flex;
              justify-content: space-between;
          }
          .text, .chart {
              flex: 1;
              margin: 10px;
          }
          #statueComponent {
              width: 120px; /* height * aspectRatio */
              height: 300px;
              background-color: rgba(244, 0, 122, 0.6);
              text-align: center;
          }
          #statueComponent .malePercentage {
              height: 50%; /* malePercentage * height */
              background-color: rgb(0, 0, 255);
          }
          #statueComponent img {
              height: 300px;
              margin: auto;
          }
          #statueComponent .percentageLabel {
              margin: auto;
          }
      </style>

  <div class="container">
    <div class="text">
      <section style="padding-top: 20px;">
          <div style="margin: auto; max-width: 1000px; text-align: justify;">
              <p style="font-weight: normal; margin-left: 5px; color: gray;">
                Tras un análisis del comportamiento de las nominaciones y premiaciones en las categorías relacionadas con la música, el guión, producción y dirección durante los últimos 50 años y dentro de ellas las del sexo femenino, se obtuvo como resultado que en total han sido nominadas a los Óscar 685 mujeres, de ellas 124 han resultado ganadoras, lo que representa el 18%.
                En todos estos años, entre más de 400 directores, sólo siete mujeres han sido nominadas a "Mejor Dirección" y de ellas sólo tres han ganado.
                Entre las nominaciones a esta categoría cuentan: Lina Wertmüller por ‘Seven Beauties’ en 1977, Jane Campion por ‘The Piano’ en 1994 y ‘The Power of the Dog’ en 2022, Sofia Coppola por ‘Lost in Translation’ en 2004, Kathryn Bigelow por ‘The Hurt Locker’ en 2010, Greta Gerwig por ‘Lady Bird’ en 2018, Emerald Fennell por ‘Promising Young Woman’ en 2021 y Chloé Zhao por ‘Nomadland’ en 2021. 
                Las tres mujeres galardonadas son: Kathryn Bigelow, Chloé Zhao y Jane Campion.
              </p>
          </div>
      </section>
  </div>  
   <div class="chart">
      <title>Componente de Estatua por Fecha</title>
      <div style="display: flex; flex-direction: column; align-items: center; padding-top: 40px;">
          <div style="display: flex; justify-content: space-between; width: 100%;">
              <label>
                  Año Inicial:
                  <input id="startYear" style="margin-left: 5px; width: 50px;" type="number" min="1973" max="2022" value="1973">
              </label>
              <label>
                  Año Final:
                  <input id="endYear" style="margin-right: 70px; width: 50px;" type="number" min="1974" max="2023" value="2023">
              </label>
          </div>
          <div style="text-align: center;display: flex;flex-direction: row;">
            <div><input type="checkbox" id="ganadores" name="ganadores"><label for="ganadores" style="color:darkslategrey; font-weight: normal; ">Ganadores</label></div>
            <div><input type="checkbox" id="direccion" name="direccion"><label for="direccion" style="color: darkslategrey; font-weight: normal; ">Dirección</label></div>
            <div><input type="checkbox" id="produccion" name="produccion"><label for="produccion" style="color: darkslategrey; font-weight: normal; ">Producción</label></div>
            <div><input type="checkbox" id="guion" name="guion"><label for="guion" style="color: darkslategrey; font-weight: normal; ">Guion</label></div>
            <div><input type="checkbox" id="musica" name="musica"><label for="musica" style="color: darkslategrey; font-weight: normal; ">Música</label></div>
        </div>
        
          <div id="statueComponent" style="margin-top: 10px;">
              <div class="malePercentage">
                  <img src="award.png">
              </div>
              <div class="percentageLabel" style="font-size: 14px; color: gold; font-weight: bold; margin-top: -1.6px;"><span>50</span> %</div>
          </div>
          <section>
              <div style="margin: auto; max-width: 1000px;">
                  <p style="font-weight: normal; font-size:small; align-items: center; color: gray;">
                      Gráfico interactivo mostrando el porciento de mujeres nominadas a un premio Oscar con respecto a los hombres nominados en el rango de años seleccionado
                  </p>
              </div>
          </section>
      </div>
  </div>
  </div>

  <div class="image-container">
    <div style="display: flex; flex-direction: row; justify-content: space-between; margin-left: 150px; margin-right: 150px;">
    <div style="text-align: center;">
      <img src='Lina.png' alt='Lina Wertmüller' style="width: 250px; height: 300px; margin-top: 20px">
      <p>Lina Wertmüller</p>
    </div>

    <div style="text-align: center;">
      <img src='Greta.png' alt='Greta Gerwig' style="width: 260px; height: 300px; margin-top: 20px">
      <p>Greta Gerwig</p>
    </div>
    </div>
    <div style="display: flex; flex-direction: row; justify-content: space-between; margin-left: 150px; margin-right: 150px;">
    <div style="text-align: center;">
      <img src='Sofia.png' alt='Sofia Coppola' style="width: 320px; height: 300px;">
      <p>Sofia Coppola</p>
    </div>
    
    <div style="text-align: center;">
      <img src='Jane.png' alt='Jane Campion' style="width: 320px; height: 300px; margin-left: 20px;">
      <p>Jane Campion</p>
    </div>
  </div>
    
  <div style="display: flex; flex-direction: row; justify-content: space-between; margin-left: 150px; margin-right: 150px;">
    <div style="text-align: center;">
      <img src='Kathryn.png' alt='Kathryn Bigelow' style="width: 310px; height: 260px;">
      <p>Kathryn Bigelow</p>
    </div>
    
    <div style="text-align: center;">
      <img src='Emerald.png' alt='Emerald Fennell' style="width: 320px; height: 260px;">
      <p>Emerald Fennell</p>
    </div>
</div>


    <div style="text-align: center;">
      <img src='Chloé.png' alt='Chloé Zhao' style="width: 320px; height: 300px;">
      <p>Chloé Zhao</p>
    </div>
  </div>
    
  <section style="padding-top:20px;">
    <div style="margin: auto; max-width: 1000px;">
        <p style="margin: 48px 0; margin-bottom: 0px; font-weight: normal; color: gray;">
          Al analizar el comportamiento en estas categorías es fácil observar que la que tiene un mayor número para las féminas es la relacionada con la música de los filmes, mientras la que peor se comporta es la de dirección, con solo 7 mujeres nominadas en total, 6 de ellas una única vez y la séptima con dos nominaciones. 
        </p>
      </div>
    </section>

  <div style="display: flex; flex-direction: row; margin-top: 20px;">
  <select id="categorySelect" style="display: flex; justify-content: space-between; width: 80px; margin-left: 100px;">
    <option value="directing" style="font-size: smaller;">Dirección</option>
    <option value="program" style="font-size: smaller;">Producción</option>
    <option value="writing" style="font-size: smaller;">Guion</option>
    <option value="music" style="font-size: smaller;">Música</option>
</select>
<select id="genderSelect" style="display: flex; justify-content: space-between; width: 80px; margin-left: 10px;">
  <option value="female" style="font-size: smaller;">Mujeres</option>
  <option value="male" style="font-size: smaller;">Hombres</option>
</select>
</div>
<div>
  <canvas id="myChart" style="max-height: 400px; max-width: 630px;"></canvas>
<section style="padding-top: 20px;">
  <div style="position: relative; max-width: 400px; margin-left: 30px; margin-top: -10px;">
    <canvas id="myChart"></canvas>
    <p style="position: absolute; top: 0; left: 0; right: 0; font-weight: normal; font-size:small; color: gray; text-align: center;">
      Gráfico con los top 10 nominados en los premios seleccionados teniendo en cuenta el género y la categoría
    </p>
  </div>
</section>
</div>
<section style="padding-top:20px;">
  <div style="margin: auto; max-width: 1000px;">
      <p style="margin-top: -50px; margin-bottom: 0px; font-weight: normal; color: gray;">
        ¿Cómo se comportan esos números para los premios Emmy y Tony? La categoría que cuenta con menor cantidad de galardones obtenidos por una fémina es el guion en los premios Tony, puesto que ninguna mujer ha ganado en más de una ocasión. Los Emmys tienen una mayor cantidad de mujeres galardonadas, pero se también cuentan con un número de categorías mucho mayor, por lo que estos números podrían no ser tan representativos. Estos datos solamente toman en cuenta los nominados y ganadores del 2000 al 2023.
      </p>
    </div>
  </section>
<div style="display: flex; flex-direction: row; margin-top: 20px;">
  <select id="awardSelect" style="display: flex; justify-content: space-between; width: 80px; margin-left: 100px;">
    <option value="tony">Tony</option>
    <option value="emmy">Emmy</option>
  </select>
  <select id="categorySelect2" style="display: flex; justify-content: space-between; width: 80px; margin-left: 100px;">
    <option value="directing" style="font-size: smaller;">Dirección</option>
    <option value="writing" style="font-size: smaller;">Guion</option>
    <option value="music" style="font-size: smaller;">Música</option>
</select>
<select id="genderSelect2" style="display: flex; justify-content: space-between; width: 80px; margin-left: 10px;">
  <option value="female" style="font-size: smaller;">Mujeres</option>
  <option value="male" style="font-size: smaller;">Hombres</option>
</select>
</div>
<div>
  <canvas id="barChart2" style="max-height: 400px; max-width: 630px;"></canvas>
<section style="padding-top: 20px;">
  <div style="position: relative; max-width: 400px; margin-left: 30px; margin-top: -10px;">
    <canvas id="barChart2"></canvas>
    <p style="position: absolute; top: 0; left: 0; right: 0; font-weight: normal; font-size:small; color: gray; text-align: center;">
      Gráfico con los top 10 nominados en la categoría seleccionada teniendo en cuenta el género
    </p>
  </div>
</section>
</div>

<section style="padding-top:20px;">
  <div style="margin: auto; max-width: 1000px;">
      <p style="margin-top: -50px; margin-bottom: 0px; font-weight: normal; color: gray;">
        En este gráfico analizaremos la representación femenina en los premios Tony, Emmy y Óscar del 2000 al 2023 en las categorías relacionadas con dirección, guion y música. Se puede observar el porciento de mujeres ganadoras con respecto a la cantidad de nominados en esas categorías en el transcurso de los años. Es necesario señalar que en el 2021 no se celebraron los premios Tony debido a la pandemia de la covid-19.
      </p>
    </div>
  </section>

<div style="display: flex; flex-direction: row; margin-top: 50px;">
  <select id="allAwardsAmount" style="width: 180px; margin-left: 30px;">
    <option value='true' style="font-size: smaller;">Mostrar por porcentajes</option>
    <option value='false' style="font-size: smaller;">Mostrar por cantidades</option>
  </select>
  <select id="allAwardsWinner" style="display: flex; justify-content: space-between; width: 130px; margin-left: 10px;">
    <option value='true' style="font-size: smaller;">Ganadoras</option>
    <option value='false' style="font-size: smaller;">Todas</option>
  </select>
  </div>
<canvas id="lineChart"></canvas>



  <h2 style="color: blue-gray; margin-top: 32px; padding-left:32px; margin-bottom: 24px;">
    El número de mujeres ganadoras va en aumento
  </h2>
  
  <section style="padding-left:32px;">
    <div style="margin: auto; max-width: 1000px;">
        <p style="margin: 48px 0; font-weight: normal; color: gray;">
          Aunque la inclusividad está en aumento para las cineastas en la era moderna, los hombres todavía superan a sus contrapartes femeninas 20 a 1, según un análisis reciente de la Escuela Annenberg de Comunicación y Periodismo de la Universidad del Sur de California, en el cual encontraron que las mujeres representaron el 4.8% del número total de directores en los 13 años analizados, a pesar de obtener las mismas puntuaciones generales en Metacritic.
  El techo de celuloide “Celluloid Ceiling”, serie de informes creados por la Dra. Martha Lauzen en el Centro para el Estudio de la Mujer en la Televisión y el Cine de la Universidad Estatal de San Diego, ha rastreado las estadísticas de empleo de las mujeres en Hollywood. Los informes se centran en las posiciones creativas detrás de la pantalla. La delimitación de las 100 películas principales y las 500 películas principales son adiciones recientes a la recopilación de datos del Centro.
        </p>
    </div>
  </section>
  
  
  <div id="myDiv"></div>
  <section>
    <div style="margin: auto; max-width: 1000px;">
        <p style="margin: 48px 0; font-weight: normal; color: gray;">
          Gráfico interactivo donde se aprecian las estadísticas de las mujeres ganadoras en diferentes tipos de categorías
        </p>
    </div>
  </section>
  <section>
    <div style="margin: auto; max-width: 1000px;">
        <p style="margin: 48px 0; font-weight: normal; color: gray;">
          Los datos históricos más completos para comparar son los de la categoría 250 principales. Para las 250 películas principales, el informe encontró que las mujeres representan el 18% de todos los directores, escritores, productores, productores ejecutivos, editores y directores de fotografía empleados.
  Al analizar la participación femenina en los roles considerados, se observa que, en 2019, casi un tercio, el 31% de las películas emplearon a 0 o 1 mujer. El 45% de las películas emplearon de 2 a 5 mujeres, el 22% empleó de 6 a 9 mujeres y solo el 2% empleó a 10 o más mujeres. 
  En contraste, el 1% de las películas empleó a 0 o 1 hombre en los roles considerados, el 5% empleó de 2 a 5 hombres, el 25% empleó de 6 a 9 hombres y la mayoría restante (69%) empleó a 10 o más hombres. 
  En las 100 películas principales, el porcentaje de mujeres que trabajaron como directoras retrocedió del 16% alcanzado en 2020 al 12% en 2021, igualando el comportamiento de 2019. 
  La participación femenina entre las personas que trabajaron en roles claves detrás de cámaras ha ido incrementándose de forma gradual: Del 16% alcanzado en 2018, subió a un 20% en 2019, en 2020 se comportó en un 23% y en 2021 alcanzó el 25%. En este incremento tiene una mayor incidencia el aumento en los porcentajes de mujeres que trabajan como Productoras Ejecutivas y Productoras.
        </p>
    </div>
  </section>

  <p style="margin: 40px 0; font-weight: normal; color: gray;">
    En cuanto al empleo detrás de cámaras de las mujeres en las películas más taquilleras. Las mujeres comprendieron el 17% de los directores que trabajaron en las 250 películas más taquilleras en 2021, bajando del 18% alcanzado en 2020. En 2019 esta cifra alcanzó el 13%. En 2023, La película Barbie, comedia fantástica estadounidense , dirigida por Greta Gerwig resultó la más taquillera de ese año, y la decimocuarta película más taquillera de todos los tiempos.
    <br />
    <br />
    Según los estudios realizados, “El techo de cristal” se refiere al hecho de que una persona calificada que desea avanzar dentro de la jerarquía de su organización es detenida en un nivel inferior debido a una discriminación basada en el sexismo, refiriéndose así a la discriminación vertical más frecuente contra las mujeres en la Industria del cine. Si tomamos en cuenta que del total de graduados en estas especialidades, la división masculino/femenino se comporta generalmente en valores similares, podemos suponer que el desequilibrio surge más adelante, relacionado con la falta de modelos a seguir y las oportunidades reales para acceder a los roles de Dirección, Música, Guion y Producción dentro de la Industria.
    <br />
    <br />
</p>

<div style="bottom: 0; width: 100%; background-color: pink; border-radius: 10px;">
  <p style="color: black; margin-left: 5px;">Metodología:
    Se extrajeron los datos relacionados con los nominados a los Premios Óscar en las categorías analizadas en el artículo del sitio: <a href="https://www.oscars.org/oscars/awards-databases">https://www.oscars.org/oscars/awards-databases</a>. Posteriormente estos datos fueron llevados a un json con el uso de un programa en python.</p>


<div>
    <div style="display: flex; justify-content: space-between;">
        <div style="margin-bottom: 16px; display: flex;max-width: 540px; margin-left: 5px;">
            <div>
                <h5 style="margin-bottom: 16px; color: blue-gray;">
                    Ana Melissa Alonso Reina
                </h5>
                <p style="width: 100%; font-weight: normal; color: gray;">
                    Estudiante de segundo año en Ciencia de la Computación
                </p>
            </div>
        </div>
    </div>
</div>
</div>

  
  
  
  <body>
    <script>
      let topStaff;
      fetch('oscar_general.json')
          .then(response => response.json())
          .then(jsonData => {
              topStaff = getTopStaff(jsonData, 'female'); // Default to 'female'
              createChart(topStaff);
          });
      
      function getTopStaff(jsonData, gender) {
        let counts = {};
    
        for (let year in jsonData) {
            for (let category in jsonData[year]) {
                for (let staff_member in jsonData[year][category]) {
                    let staffData = jsonData[year][category][staff_member];
                    if (staffData.gender === gender) {
                        if (!counts[category]) {
                            counts[category] = {};
                        }
                        if (!counts[category][staff_member]) {
                            counts[category][staff_member] = { count: 0, years: [] };
                        }
                        counts[category][staff_member].count++;
                        counts[category][staff_member].years.push(year);
                    }
                }
            }
        }
        let topStaff = {};
        for (let category in counts) {
            let staffCounts = Object.entries(counts[category]).map(([name, data]) => ({ name, count: data.count, years: data.years }));
            staffCounts.sort((a, b) => b.count - a.count);
            topStaff[category] = staffCounts.slice(0, 10);
        }
    
        return topStaff;
    }
      function createChart(topStaff) {
          // Get the selected category
          let selectedCategory = document.getElementById('categorySelect').value;
      
          // Get the selected gender
          let selectedGender = document.getElementById('genderSelect').value;
      
          // Get the context of the canvas element we want to select
          var ctx = document.getElementById('myChart').getContext('2d');
      
          // Clear any existing chart
          if (window.myChart instanceof Chart) {
              window.myChart.destroy();
          }
      
          let labels = [];
          let data = [];
        let tooltipItems = [];
        for (let i = 0; i < topStaff[selectedCategory].length; i++) {
            labels.push(topStaff[selectedCategory][i].name); // staff member's name
            data.push(topStaff[selectedCategory][i].count); // staff member's count
            tooltipItems.push(topStaff[selectedCategory][i].years.join(', ')); // staff member's years
            console.log(tooltipItems)
        }
      
          // Set the color based on the selected gender
          let color = selectedGender === 'male' ? 'rgb(0, 0, 255)' : 'rgba(244, 0, 122, 0.6)'; // Blue for male, pink for female
          let border = selectedGender === 'male' ? 'rgba(7, 3, 216,3)' : 'rgba(244, 0, 122, 1.3)'; // Blue for male, pink for female
          // Create the chart
          window.myChart = new Chart(ctx, {
              type: 'bar',
              data: {
                  labels: labels,
                  datasets: [{
                      label: selectedCategory,
                      data: data,
                      backgroundColor: color,
                      borderColor: border,
                      borderWidth: 1.5
                  }]
              },
              options: {
                 tooltips: {
                      enabled: true,
                      mode: 'single',
                      callbacks: {
                           label: function(tooltipItems, data) {
                           let label = data.labels[tooltipItems.index];
                           let value = data.datasets[tooltipItems.datasetIndex].data[tooltipItems.index];
                           let years = 5;
                      return `${label}: ${value} (5)`;
                       }
                    }
                  },
                  scales: {
                      y: {
                          beginAtZero: true,
                          grid: {
                              display: false // Hide the grid lines
                          }
                      },
                      x: {
                          grid: {
                              display: false // Hide the grid lines
                          }
                      }
                  }
              }
          });
      }
      // Update the chart when the selected category or gender changes
      document.getElementById('categorySelect').addEventListener('change', updateChart);
      document.getElementById('genderSelect').addEventListener('change', updateChart);
      
      function updateChart() {
          let selectedGender = document.getElementById('genderSelect').value;
          topStaff = getTopStaff(jsonData, selectedGender);
          createChart(topStaff);
      }
      
      </script>
    

    <script>
      let topStaff2;
      let award_jsonData;
      // Fetch data and create chart on page load
      fetch('awards_all.json')
          .then(response => response.json())
          .then(data => {
              award_jsonData = data;
              updateChart2();
          });
      
      function getTopStaff2(awardData, gender) {
          let counts = {};
      
          for (let year in awardData) {
              for (let category in awardData[year]) {
                  for (let staff_member in awardData[year][category]) {
                      let staffData = awardData[year][category][staff_member];
                      if (staffData.gender === gender) {
                          if (!counts[category]) {
                              counts[category] = {};
                          }
                          if (!counts[category][staff_member]) {
                              counts[category][staff_member] = { count: 0, years: [] };
                          }
                          counts[category][staff_member].count++;
                          counts[category][staff_member].years.push(year);
                      }
                  }
              }
          }
      
          let topStaff2 = {};
          for (let category in counts) {
              let staffCounts = Object.entries(counts[category]).map(([name, data]) => ({ name, count: data.count, years: data.years }));
              staffCounts.sort((a, b) => b.count - a.count);
              topStaff2[category] = staffCounts.slice(0, 10);
          }
      
          return topStaff2;
      }
      
      function createChart2(topStaff2) {
          // Get the selected category, gender, and award
          let selectedCategory = document.getElementById('categorySelect2').value;
          let selectedGender = document.getElementById('genderSelect2').value;
          let selectedAward = document.getElementById('awardSelect').value;
      
          // Get the context of the canvas element we want to select
          var ctx = document.getElementById('barChart2').getContext('2d');
      
          // Clear any existing chart
          if (window.barChart2 instanceof Chart) {
              window.barChart2.destroy();
          }
      
          let labels = [];
          let data = [];
          let tooltipItems = [];
          for (let i = 0; i < topStaff2[selectedCategory].length; i++) {
              labels.push(topStaff2[selectedCategory][i].name); // staff member's name
              data.push(topStaff2[selectedCategory][i].count); // staff member's count
              tooltipItems.push(topStaff2[selectedCategory][i].years.join(', ')); // staff member's years
          }
          let color = selectedGender === 'male' ? 'rgb(0, 0, 255)' : 'rgba(244, 0, 122, 0.6)'; // Blue for male, pink for female
          let border = selectedGender === 'male' ? 'rgba(7, 3, 216,3)' : 'rgba(244, 0, 122, 1.3)'; // Blue for male, pink for female
          // Create the chart
          window.barChart2 = new Chart(ctx, {
              type: 'bar',
              data: {
                  labels: labels,
                  datasets: [{
                      label: selectedCategory,
                      data: data,
                      backgroundColor: color,
                      borderColor: border,
                      borderWidth: 1.5
                  }]
              },
              options: {
                 tooltips: {
                      enabled: true,
                      mode: 'single',
                      callbacks: {
                           label: function(tooltipItems, data) {
                           let label = data.labels[tooltipItems.index];
                           let value = data.datasets[tooltipItems.datasetIndex].data[tooltipItems.index];
                           let years = 5;
                      return `${label}: ${value} (5)`;
                       }
                    }
                  },
                  scales: {
                      y: {
                          beginAtZero: true,
                          grid: {
                              display: false // Hide the grid lines
                          }
                      },
                      x: {
                          grid: {
                              display: false // Hide the grid lines
                          }
                      }
                  },
                  responsive: true,
              }
          });
      }
      
      document.getElementById('categorySelect2').addEventListener('change', updateChart2);
      document.getElementById('genderSelect2').addEventListener('change', updateChart2);
      document.getElementById('awardSelect').addEventListener('change', updateChart2);
      
      function updateChart2() {
          let selectedGender = document.getElementById('genderSelect2').value;
          let selectedAward = document.getElementById('awardSelect').value;
          topStaff2 = getTopStaff2(award_jsonData[selectedAward], selectedGender);
          createChart2(topStaff2);
      }
      </script>
      


        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  let years = [];
        let oscarCounts = [];
        let oscarWinners = [];
        let oscarWinnerPercentages = [];
        let oscarPercentages = [];
        let tonyCounts = [];
        let tonyWinners = [];
        let tonyWinnerPercentages = [];
        let tonyPercentages = [];
        let emmyCounts = [];
        let emmyWinners = [];
        let emmyWinnerPercentages = [];
        let emmyPercentages = [];
        let [count, percentages, winnerCount, winnerPercentages] = [,];
  fetch('awards_all.json')
    .then(response => response.json())
    .then(data => {

        for (let year = 2000; year <= 2023; year++) {
            years.push(year);
            [count, percentages, winnerCount, winnerPercentages] = countWomen(data.oscar[year]);
            oscarCounts.push(count);
            oscarPercentages.push(percentages);
            oscarWinners.push(winnerCount);
            oscarWinnerPercentages.push(winnerPercentages);
            [count, percentages, winnerCount, winnerPercentages] = countWomen(data.tony[year]);
            tonyCounts.push(count);
            tonyPercentages.push(percentages);
            tonyWinners.push(winnerCount);
            tonyWinnerPercentages.push(winnerPercentages);
            [count, percentages, winnerCount, winnerPercentages] = countWomen(data.emmy[year]);
            emmyCounts.push(count);
            emmyPercentages.push(percentages);
            emmyWinners.push(winnerCount);
            emmyWinnerPercentages.push(winnerPercentages);
        }

        let chart = new Chart(document.getElementById('lineChart'), {
            type: 'line',
            data: {
                labels: years,
                datasets: [{
                    label: 'Oscar',
                    data:oscarPercentages,
                    borderColor: 'red',
                    fill: false
                }, {
                    label: 'Tony',
                    data: tonyPercentages,
                    borderColor: 'yellow',
                    fill: false
                }, {
                    label: 'Emmy',
                    data: emmyPercentages,
                    borderColor: 'green',
                    fill: false
                }]
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    text: 'Number of Women in Oscars, Tonys, and Emmys per Year'
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
    });
    document.getElementById('allAwardsAmount').addEventListener('change', updateLineChart);
    document.getElementById('allAwardsWinner').addEventListener('change', updateLineChart);
    
    function updateLineChart(){
    let percentage = document.getElementById('allAwardsAmount').value;
    let winners = document.getElementById('allAwardsWinner').value;

    if (percentage === 'true') {
        if (winners === 'true') {
            chart.data.datasets[0].data = oscarWinnerPercentages;
            chart.data.datasets[1].data = tonyWinnerPercentages;
            chart.data.datasets[2].data = emmyWinnerPercentages;
            console.log("This are the winners pecrentages: " +oscarWinnerPercentages)
        }
        else{
            chart.data.datasets[0].data = oscarPercentages;
            chart.data.datasets[1].data = tonyPercentages;
            chart.data.datasets[2].data = emmyPercentages;
            console.log("This are the nominees pecrentages: " +oscarPercentages)
        }
    } else if (winners === 'true') {
        chart.data.datasets[0].data = oscarWinners;
        chart.data.datasets[1].data = tonyWinners;
        chart.data.datasets[2].data = emmyWinners;
    }
    else {
        chart.data.datasets[0].data = oscarCounts;
        chart.data.datasets[1].data = tonyCounts;
        chart.data.datasets[2].data = emmyCounts;
    }
    console.log(chart.data.datasets[0].data)
    chart.update();
}
});

function countWomen(data) {
    let women_count = 0;
    let total_count = 0;
    let winner_count = 0;
    for (let category of ['writing', 'directing', 'music']) {
        if (data && data[category]) {
            for (let staff of Object.values(data[category])) {
                if (staff.gender === 'female') {
                    women_count++;
                    if (staff.winner) {
                      winner_count++;
                    }
                }
                total_count++;
            }
        }
    }
    if (total_count === 0) {
      return [0,0,0,0];
    }
    return [women_count, (women_count / total_count)*100, winner_count, (winner_count / total_count)*100];
}
</script>



      <script>
    
        // Your component code
        function ChartCard3D(jsonData) {
          var translation = {
            directing: 'Dirección',
            program: 'Producción',
            music: 'Música',
            writing: 'Guion'
          }
        
          let result = [];
        
          for (const year in jsonData) {
            for (const category in jsonData[year]) {
              let categoryObj = result.find(item => item.category === category);
        
              if (!categoryObj) {
                categoryObj = { category: category, data: [] };
                result.push(categoryObj);
              }
        
              let count = 0;
        
              for (const nominee in jsonData[year][category]) {
                if (jsonData[year][category][nominee].gender === 'female') {
                  count++;
                }
              }
        
              categoryObj.data.push({ year: year, count: count });
            }
          }
        
          var data = [];
          var count = -0.5;
        
          for (const cat of result) {
            data.push({
              x:[count, count+1], y:cat.data.map(x=>[+x.year,+x.year]), z:cat.data.map(x=>[x.count, x.count]),
              name: '',
              colorscale: 'Viridis',
              type: 'surface',
              showscale: false,
            })
            count=count+2;
          }
        
          var layout = {
            showlegend: false,
            autosize: true,
            scene: {
              xaxis: {
                title: 'Tipos de categorías',
                tickvals: result.map((_, i) => 2*i),
                ticktext: result.map(x => translation[x.category])
              },
              yaxis: {title: 'Años'},
              zaxis: {title: 'Cantidad de mujeres ganadoras'},
            }
          };
        
          Plotly.newPlot('myDiv', data, layout);
        };
        
        // Fetch the JSON data and call ChartCard3D
        var data;
        fetch('oscar_general.json')
          .then(response => response.json())
          .then(data => ChartCard3D(data));
        
        </script>
      <script>
       
       var jsonData;
  
  fetch('oscar_general.json')
      .then(response => response.json())
      .then(data => {
          jsonData = data;
          updateGraph();
      });
  
      function calculateMalePercentage(startYear, endYear) {
    var total = 0;
    var maleCount = 0;
    for (var year in jsonData) {
        if (+year >= startYear && +year <= endYear) {
            for (var category in jsonData[year]) {
                for (var nominee in jsonData[year][category]) {
                    var ganadoresCondition = !document.getElementById('ganadores').checked || jsonData[year][category][nominee].winner === true;
                    var condition = ganadoresCondition;
                  if (document.getElementById('direccion').checked || document.getElementById('produccion').checked || document.getElementById('guion').checked || document.getElementById('musica').checked) {
                    // Check each condition only if the corresponding checkbox is selected
                    var direccionCondition = document.getElementById('direccion').checked && category === 'directing';
                    var produccionCondition = document.getElementById('produccion').checked && category === 'program';
                    var guionCondition = document.getElementById('guion').checked && category === 'writing';
                    var musicaCondition = document.getElementById('musica').checked && category === 'music';
                    condition = ganadoresCondition && (direccionCondition || produccionCondition || guionCondition || musicaCondition);
                  }
                    // Count the nominee only if all selected conditions are met
                    if(condition) {
                        if (jsonData[year][category][nominee].gender === 'male') {
                            maleCount++;
                        }
                        total++;
                    }
                }
            }
        }
    }
    return total === 0 ? 0 : maleCount / total;
}


function updateGraph() {
    var startYearInput = document.getElementById('startYear');
    var endYearInput = document.getElementById('endYear');
    var startYear = Math.min(Math.max(+startYearInput.value, 1973), 2022);
    var endYear = Math.max(Math.min(+endYearInput.value, 2023), 1974);
    var malePercentage = calculateMalePercentage(startYear, endYear);

    var statueComponent = document.getElementById('statueComponent');
    statueComponent.querySelector('.malePercentage').style.height = (malePercentage * 100) + '%';
    statueComponent.querySelector('.percentageLabel span').textContent = Math.round((1 - malePercentage) * 100);
}

document.getElementById('startYear').addEventListener('change', updateGraph);
document.getElementById('endYear').addEventListener('change', updateGraph);
document.getElementById('ganadores').addEventListener('change', updateGraph);
document.getElementById('direccion').addEventListener('change', updateGraph);
document.getElementById('produccion').addEventListener('change', updateGraph);
document.getElementById('guion').addEventListener('change', updateGraph);
document.getElementById('musica').addEventListener('change', updateGraph);

  </script>
  </body>
  </html>
  